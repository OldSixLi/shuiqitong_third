webpackJsonp([1],{I8Ya:function(e,t,a){e.exports=a.p+"static/img/group-icon.a4ef709.png"},VecE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("4YfN"),r=a.n(s),n=a("SJI6"),i={name:"Child",props:{departId:""},computed:r()({},Object(n.mapGetters)(["companyTree","wxComTree","checkValue"])),data:function(){return{childList:[],parentArr:[],parentId:"",parentName:""}},mounted:function(){this.departId&&this.resolveList()},methods:{backParent:function(){var e=this.parentId||1;this.$to("/system/user/depart/"+e)},toChild:function(e){e&&this.$to("/system/user/depart/"+e)},resolveList:function(){var e=this,t=this.wxComTree;this.departId;this.childList=t.filter(function(t){return t.id==e.departId&&(e.parentArr[0]=t,e.parentId=t.parentid),t.parentid==e.departId}),this.parentName=1==this.departId||"1"==this.departId?"":this.parentArr[0]&&this.parentArr[0].name},getParent:function(){}},watch:{wxComTree:function(e,t){this.resolveList()},departId:function(){this.resolveList()}}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.parentName?s("mt-button",{attrs:{size:"small",icon:"back"},on:{click:e.backParent}},[e._v(e._s(e.parentName))]):e._e(),e._v(" "),e.wxComTree[0]&&e.wxComTree[0].id==e.departId?s("p",{staticStyle:{padding:"0 1rem","font-weight":"bold"}},[e._v(e._s(e.wxComTree[0].name))]):e._e(),e._v(" "),e.childList.length>0?s("span",{staticClass:"mint-radiolist-title",staticStyle:{"margin-bottom":"0.2rem"}},[e._v("子部门")]):e._e(),e._v(" "),e.childList.length>0?s("ul",{staticStyle:{"padding-left":"0","margin-top":"0"}},e._l(e.childList,function(t){return s("li",{staticClass:"li-child",on:{click:function(a){e.toChild(t.id)}}},[s("img",{attrs:{src:a("I8Ya")}}),e._v(e._s(t.name)+"\n    ")])})):e._e()],1)},staticRenderFns:[]};var o={name:"Role",components:{child:a("C7Lr")(i,l,!1,function(e){a("fIEE")},"data-v-27d3ab4b",null).exports},computed:r()({},Object(n.mapGetters)(["departmentId","checkValue","roleId"])),data:function(){return{departId:"",userlist:[],userVal:"",loading:!0}},mounted:function(){var e=this.$param(this);this.departId=e.departId||"1",this.getUsers()},beforeRouteEnter:function(e,t,a){a(function(t){t.departId=e.params.departId,t.userlist=[],t.loading=!0,t.checkValue&&(t.userVal=t.checkValue),t.getUsers()})},beforeRouteUpdate:function(e,t,a){e.params.departId&&this.departId!=e.params.departId&&(this.departId=e.params.departId,a(),this.userlist=[],this.loading=!0,this.checkValue&&(this.userVal=this.checkValue),this.getUsers())},methods:{topBack:function(){this.$to("/")},toUser:function(){this.$to("/system/user")},resolvePhone:function(e){var t=e.toString().split("");return t.splice(3,4,"****"),t.join("")},getUsers:function(){var e=this;this.$get("/ent/login/getEmployee",{departmentId:this.departId}).then(function(t){var a=[];t.success&&t.bean&&t.bean.employee&&t.bean.employee.length&&(t.bean.employee.forEach(function(t){var s={label:(2==t.name.length?t.name+"　":t.name)+"  "+(t.mobile?e.resolvePhone(t.mobile):""),value:t.userid};a.push(s)}),a.sort(function(e,t){return e.label.localeCompare(t.label,"zh")})),e.userlist=a,e.loading=!1},function(t){e.loading=!1})}},watch:{userVal:function(e,t){this.userVal&&this.$store.commit("changeCheckValue",this.userVal)},checkValue:function(){this.checkValue!=this.userVal&&this.userVal&&(this.userVal=""),""==this.checkValue&&(this.userVal="")}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"router-block",staticStyle:{"padding-top":"0.5rem"}},[a("child",{attrs:{departId:e.departId}}),e._v(" "),e.userlist.length>0?[a("mt-radio",{staticClass:"page-part",attrs:{name:"users",align:"right",title:"部门员工",options:e.userlist},model:{value:e.userVal,callback:function(t){e.userVal=t},expression:"userVal"}})]:e._e(),e._v(" "),0==e.userlist.length?[a("p",{staticClass:"text-center"},[e.loading?a("span",[e._v("加载中...")]):e._e(),e._v(" "),e.loading?e._e():a("span",[e._v("该部门下没有成员")])])]:e._e()],2)},staticRenderFns:[]},d=a("C7Lr")(o,c,!1,null,null,null);t.default=d.exports},fIEE:function(e,t){}});