webpackJsonp([10],{G6cX:function(t,e){},m5kD:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("4YfN"),s=r.n(n),i=r("SJI6"),a={name:"Role",data:function(){return{departList:[],departObj:[],activeId:1,activeArr:[]}},computed:s()({},Object(i.mapGetters)(["departmentId","checkValue","roleId","roleName"])),beforeRouteEnter:function(t,e,r){r(function(t){})},created:function(){this.getDepartment()},methods:{setUser:function(){var t=this;if(this.checkValue){var e=this.roleId,r=this.checkValue;this.$get("/ent/login/saveOrUpdateUserRole",{userId:r,roleId:e}).then(function(e){e.success?(t.$tip("设置成功"),t.$to("/system/role")):t.$alert(e.message)})}else this.$tip("您还未选择员工")},topBack:function(){this.$to("/system/role")},filterArray:function(t,e){return function e(r){for(var n=[],s=0;s<t.length;s++){var i=t[s];i.parentid===r&&(i.children=e(i.id),n.push(i))}return n}(e)},getDepartment:function(){var t=this;this.$get("/ent/login/getDepartments").then(function(e){if(e.success){e.bean.departments.sort(function(t,e){return t.id-e.id});var r=t.filterArray(e.bean.departments,0);t.departList=e.bean.departments,t.departObj=r,t.$store.commit("setComTree",r),t.$store.commit("setwxComTree",e.bean.departments)}})},getParents:function(t){if(0==t)return!1;for(var e=0;e<this.departList.length;e++){var r=this.departList[e];if(r.id==t)return this.activeArr.push(t),this.getParents(r.parentid)}}},watch:{departmentId:function(){this.activeArr=[],this.getParents(this.departmentId)}}},o={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"router-block"},[r("mt-header",{attrs:{fixed:"",title:""}},[r("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:t.topBack},slot:"left"},[t._v("设置"+t._s(t.roleName||"角色"))]),t._v(" "),r("mt-button",{attrs:{slot:"right"},on:{click:t.setUser},slot:"right"},[t._v("保存")])],1),t._v(" "),r("div",{staticClass:"page-content"},[r("router-view")],1)],1)},staticRenderFns:[]};var c=r("C7Lr")(a,o,!1,function(t){r("G6cX")},null,null);e.default=c.exports}});