webpackJsonp([6],{"81N0":function(t,e){},Jc34:function(t,e,s){t.exports=s.p+"static/img/shuiwu.390336a.png"},b887:function(t,e){},mph0:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("rVsN"),n=s.n(i),o=s("4YfN"),a=s.n(o),r=s("SJI6"),c={name:"Regist",data:function(){return{shxydm:"",username:"",checkCode:"",phone:"",checkBtnDisabled:!0,restNum:0,showTopTip:!1,tipWord:"内容",timer:null,isShowList:!1,tax:"",taxList:[{flex:1,defaultIndex:-1,values:[],className:"slot1",textAlign:"right",valueIndex:-1}],systemTaxs:[]}},mounted:function(){this.getTaxList()},computed:a()({},Object(r.mapGetters)(["departmentId","companyId","comUserId","checkState"]),{taxId:function(){var t=this;if(this.tax&&this.systemTaxs&&this.systemTaxs.length>0)return this.systemTaxs.filter(function(e){return e.name==t.tax})[0].id}}),beforeRouteEnter:function(t,e,s){s(function(t){t.checkState}),s()},methods:{getComInfo:function(t){var e=this;this.$get("/audit/getEntepriseInfo?corpId="+t).then(function(t){t.success&&(e.username=t.bean.entInfo.entName)})},onDateChange:function(t,e){this.tax=e[0]},showList:function(){this.isShowList=!0},tip:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";1==this.showTopTip&&clearTimeout(this.timer),this.tipWord=e,this.showTopTip=!0,this.timer=setTimeout(function(){t.showTopTip=!1},2e3)},restNumHandler:function(){var t=this;this.restNum&&this.restNum--,this.restNum>0&&setTimeout(function(){t.restNumHandler()},1e3)},getCheckCode:function(){var t=this,e=this.phone;return e?this.checkPhone(e)?void this.$post("/audit/sendCode",{phone:e}).then(function(s){return s&&s.success&&s.bean?(t.restNum=60,n.a.resolve(e)):n.a.reject("请求服务失败，请重试!")}):(this.tip("请输入正确的手机号","error"),!1):(this.tip("请输入手机号后再进行操作","error"),!1)},checkPhone:function(t){return!!/^1(3|4|5|7|8)\d{9}$/.test(t)},submitInfo:function(){var t=this,e=this.username,s=this.shxydm;if(!this.taxId)return this.$tip("请选择您所属的税务分局"),!1;if(!e)return this.$tip("请输入公司名称"),!1;if(!s)return this.$tip("请输入公司税号"),!1;if(!this.phone)return this.$tip("请输入手机号"),!1;if(!this.checkCode)return this.$tip("请输入验证码"),!1;var i=this.checkCode,o=this.phone;this.$post("/audit/checkCode",{code:i,phone:o}).then(function(t){return!!t.success||n.a.reject(t.message||"验证码输入错误，请修改后重试！")}).then(function(s){return t.$post("/audit/submissionOfAudit",{auditType:"1",corpId:t.companyId||"TODO企业微信中的公司ID",entName:e,license:"",taxId:t.taxId,manager:t.comUserId||"TODO 企业微信中的userId",phone:t.phone,sh:t.shxydm})}).then(function(e){e.success&&t.$to("/infoChecking/0"),!e.success&&t.$alert(e.message)}).catch(function(e){console.log(e),t.tip(e||"请求服务失败，请重试！")})},getTaxList:function(){var t=this;this.$get("/audit/getTaxList").then(function(e){if(e.success){var s=[""];e.bean.forEach(function(t){s.push(t.name)}),t.taxList[0].values=s,t.systemTaxs=e.bean}})}},watch:{restNum:function(){60==this.restNum&&this.restNumHandler()}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"router-block"},[s("mt-popup",{staticClass:"mint-popup-2",attrs:{"popup-transition":"popup-fade",position:"top",modal:!1},model:{value:t.showTopTip,callback:function(e){t.showTopTip=e},expression:"showTopTip"}},[s("p",[t._v(" "+t._s(t.tipWord))])]),t._v(" "),t._m(0),t._v(" "),s("div",{staticStyle:{padding:"0 1rem"}},[s("h3",{staticClass:"text-center",staticStyle:{"margin-top":"0","padding-top":"1rem"}},[t._v("提交审核信息")]),t._v(" "),s("mt-field",{staticClass:"tax-select",staticStyle:{color:"#000"},attrs:{label:"所属分局",id:"taxs",value:t.tax,disabled:"true",placeholder:"请选择所属税务分局"},nativeOn:{click:function(e){return t.showList(e)}}}),t._v(" "),s("mt-field",{attrs:{label:"公司名称",placeholder:"请输入公司名称"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),t._v(" "),s("mt-field",{attrs:{label:"税号",placeholder:"请输入税号",type:"number"},model:{value:t.shxydm,callback:function(e){t.shxydm=e},expression:"shxydm"}}),t._v(" "),s("mt-field",{attrs:{label:"手机号",placeholder:"请输入您的手机号",type:"number"},model:{value:t.phone,callback:function(e){t.phone="string"==typeof e?e.trim():e},expression:"phone"}}),t._v(" "),s("mt-field",{attrs:{label:"验证码",placeholder:"请输入验证码",attr:{maxlength:4}},model:{value:t.checkCode,callback:function(e){t.checkCode="string"==typeof e?e.trim():e},expression:"checkCode"}},[s("mt-button",{attrs:{size:"small",disabled:t.restNum>0},on:{click:t.getCheckCode}},[t.restNum>0?s("span",[t._v(t._s(t.restNum)+"s后重新获取")]):t._e(),t._v(" "),0==t.restNum?s("span",[t._v("获取验证码")]):t._e()])],1)],1),t._v(" "),s("p",{staticStyle:{padding:"0 2rem"}},[s("mt-button",{staticClass:"submit-btn",attrs:{type:"primary",size:"large"},on:{click:t.submitInfo}},[t._v("提交审核")])],1),t._v(" "),s("mt-popup",{staticClass:"mint-popup-4",attrs:{position:"bottom"},model:{value:t.isShowList,callback:function(e){t.isShowList=e},expression:"isShowList"}},[s("mt-picker",{attrs:{slots:t.taxList,"visible-item-count":5,"show-toolbar":!1,"value-key":"name"},on:{change:t.onDateChange}})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"center-img"},[e("img",{attrs:{src:s("Jc34"),alt:"自定义"}})])}]};var h=s("C7Lr")(c,u,!1,function(t){s("81N0"),s("b887")},"data-v-1739f542",null);e.default=h.exports}});